<!DOCTYPE html>
<html>
	<head>
		<title>Kik Map Sample</title>

		<script>
		function getUserDetails() {
			if (kik.enabled) {
				kik.getUser(function (user) {					
					if (!user) {
						document.getElementById("res-text").innerHTML = "Didn't get User";
					} else {
						document.getElementById("res-text").innerHTML = user.fullName;
						document.getElementById("res-thumb-url").innerHTML = user.thumbnail;
						document.getElementById("res-thumb-img").src = user.thumbnail;
					}
				})
			} else {
				document.getElementById("res-text").innerHTML = "Kik not enabled";
			}
		}

		function resetUserDetails() {
			document.getElementById("res-text").innerHTML = "....";
			document.getElementById("res-thumb-url").innerHTML = "....";
			document.getElementById("res-thumb-img").src = "image/icon.png";
		}

		function newStaticMap() {
			var topLeftLat = -33.831422;
			var topLeftLng = 151.114569;
			var bottomRightLat = -33.882805;
			var bottomRightLng = 151.224546;

			var centerLat = topLeftLat + Math.random() * (topLeftLat - bottomRightLat);
			var centerLng = topLeftLng + Math.random() * (topLeftLng - bottomRightLng);

			document.getElementById("static-map-img").src =
			    "http://maps.googleapis.com/maps/api/staticmap?center=" +
			    centerLat + "," + centerLng +
			    "&zoom=15&scale=1&size=128x128&maptype=roadmap&format=png&visual_refresh=true";
		}

		function sendMapMessage() {
			kik.send( {
				title : "Static Map",
				text  : "Here's a Map",
				pic   : document.getElementById("static-map-img").src
			});
		}

		</script>
        <meta charset="utf-8">
        <meta name="description" content="My amazing app!">
        <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
        <meta name="kik-transparent-statusbar" content="black">
        <meta name="kik-hide-form-helpers" content="true">
        <link rel="kik-icon" href="/kik/image/icon.png">
	</head>

	<body>

		<h4>Kik Web-page with Static Map</h4>
		<div>
			<p id="res-text">.....</p>
			<p id="res-thumb-url">&nbsp;</p>
			<p>
				<img id="res-thumb-img" height="64" width="64" src="image/icon.png"/>
			</p>
			<p>
				<img id="static-map-img" width="128" src="http://maps.googleapis.com/maps/api/staticmap?center=-33.831422,151.114&zoom=15&scale=1&size=128x128&maptype=roadmap&format=png&visual_refresh=true">
			</p>
		</div>

		<div>
			<button onclick="getUserDetails()" type="button">Get User Details</button>
			<button onclick="resetUserDetails()" type="button">Reset</button>
			<button onclick="newStaticMap()" type="button">New Map</button>
		</div>
		<br>
		<div>
			<button onclick="sendMapMessage()" type="button">
				<img src="image/colour.png"/>&nbsp;Send Map
			</button>
		</div>

		<script src="http://cdn.kik.com/kik/2.0.5/kik.js"></script>
	</body>
</html>